/**
 * adapt-strap
 * @version v2.0.6 - 2014-10-26
 * @link https://github.com/Adaptv/adapt-strap
 * @author Kashyap Patel (kashyap@adap.tv)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,e,t){"use strict";angular.module("adaptv.adaptStrap",["adaptv.adaptStrap.utils","adaptv.adaptStrap.treebrowser","adaptv.adaptStrap.tablelite","adaptv.adaptStrap.tableajax","adaptv.adaptStrap.loadingindicator","adaptv.adaptStrap.draggable","adaptv.adaptStrap.infinitedropdown"]).provider("$adConfig",function(){var a=this.iconClasses={expand:"glyphicon glyphicon-plus-sign",collapse:"glyphicon glyphicon-minus-sign",loadingSpinner:"glyphicon glyphicon-refresh ad-spin",firstPage:"glyphicon glyphicon-fast-backward",previousPage:"glyphicon glyphicon-backward",nextPage:"glyphicon glyphicon-forward",lastPage:"glyphicon glyphicon-fast-forward",sortAscending:"glyphicon glyphicon-chevron-up",sortDescending:"glyphicon glyphicon-chevron-down",sortable:"glyphicon glyphicon-resize-vertical",draggable:"glyphicon glyphicon-align-justify",selectedItem:"glyphicon glyphicon-ok"},e=this.paging={request:{start:"skip",pageSize:"limit",page:"page",sortField:"sort",sortDirection:"sort_dir",sortAscValue:"asc",sortDescValue:"desc"},response:{itemsLocation:"data",totalItems:"pagination.totalCount"}};this.$get=function(){return{iconClasses:a,paging:e}}}),angular.module("adaptv.adaptStrap.draggable",[]).directive("adDrag",["$rootScope","$parse","$timeout",function(t,n,o){function i(i,r,l){function g(){r.attr("draggable","false"),c(!0)}function c(a){a&&(i.$on("$destroy",d),l.$observe("adDrag",f),i.$watch(l.adDragData,u),i.$on("draggable:start",s),i.$on("draggable:end",p),i.hasHandle?r.on(j,".ad-drag-handle",m):(r.on(j,m),r.addClass("ad-draggable")),N||(r.on("mousedown",".ad-drag-handle",function(){return!1}),r.on("mousedown",function(){return!1})))}function s(a,e){e.el===r&&e.callback&&e.callback(a)}function p(a,e){e.el===r&&e.callback&&e.callback(a)}function d(){c(!1)}function u(a){i.data=a}function f(a){K=i.$eval(a)}function m(a){K&&(N?(C(),M=setTimeout(function(){C(),b(a)},100),q.on(A,C),q.on(T,C)):b(a))}function h(a,e){var t,n=$(e).attr("style");return n&&n.split(";").forEach(function(e){var n=e.split(":");$.trim(n[0])===a&&(t=n[1])}),t}function v(){h("width",r)&&r.data("ad-draggable-temp-width",h("width",r)),r.width(r.width()),r.children().each(function(){h("width",this)&&$(this).data("ad-draggable-temp-width",h("width",this)),$(this).width($(this).width())})}function C(){clearTimeout(M),q.off(A,C),q.off(T,C)}function b(a){K&&(a.preventDefault(),w=r.offset(),w=i.hasHandle?r.find(".ad-drag-handle").offset():r.offset(),r.addClass("ad-dragging"),E=a.pageX||a.originalEvent.touches[0].pageX,I=a.pageY||a.originalEvent.touches[0].pageY,k=E-w.left-O.scrollLeft(),L=I-w.top-O.scrollTop(),v(),z(k,L),q.on(A,P),q.on(T,S),t.$broadcast("draggable:start",{x:E,y:I,tx:k,ty:L,el:r,data:i.data,callback:D}))}function P(a){var e,n;K&&(a.preventDefault(),e=a.pageX||a.originalEvent.touches[0].pageX,n=a.pageY||a.originalEvent.touches[0].pageY,k=e-E+w.left-O.scrollLeft(),L=n-I+w.top-O.scrollTop(),z(k,L),t.$broadcast("draggable:move",{x:E,y:I,tx:k,ty:L,el:r,data:i.data}))}function S(a){K&&(a.preventDefault(),t.$broadcast("draggable:end",{x:E,y:I,tx:k,ty:L,el:r,data:i.data,callback:y}),r.removeClass("ad-dragging"),x(),q.off(A,P),q.off(T,S))}function D(a){i.onDragStartCallback&&i.$apply(function(){i.onDragStartCallback(i,{$data:i.data,$dragElement:r,$event:a})})}function y(a){i.onDragEndCallback&&o(function(){i.$apply(function(){i.onDragEndCallback(i,{$data:i.data,$dragElement:r,$event:a})})},100)}function x(){r.css({left:"",top:"",position:"","z-index":""});var a=r.data("ad-draggable-temp-width");r.css(a?{width:a}:{width:""}),r.children().each(function(){var a=$(this).data("ad-draggable-temp-width");$(this).css(a?{width:a}:{width:""})})}function z(a,e){r.css({left:a,top:e,position:"fixed","z-index":99999})}i.draggable=l.adDrag,i.hasHandle="false"===l.adDragHandle||"undefined"==typeof l.adDragHandle?!1:!0,i.onDragStartCallback=n(l.adDragBegin)||null,i.onDragEndCallback=n(l.adDragEnd)||null,i.data=null;var w,E,I,k,L,N="ontouchstart"in e.documentElement,j="touchstart mousedown",A="touchmove mousemove",T="touchend mouseup",q=$(e),O=$(a),K=!1,M=null;g()}return{restrict:"A",link:i}}]).directive("adDrop",["$rootScope","$parse",function(e,t){function n(n,o,i){function r(){l(!0)}function l(a){a&&(i.$observe("adDrop",c),n.$on("$destroy",g),n.$on("draggable:move",p),n.$on("draggable:end",d),n.$on("draggable:change",s))}function g(){l(!1)}function c(a){f=n.$eval(a)}function s(a,e){m!==e.el&&(m=null)}function p(a,t){if(f&&o!==t.el){var i=u(t.tx,t.ty,t.el);null!==i?(m=i,t.el.lastDropElement=m,n.$apply(function(){n.onDropOverCallback(n,{$data:t.data,$dragElement:t.el,$dropElement:m,$event:a})}),o.addClass("ad-drop-over"),e.$broadcast("draggable:change",{el:m})):t.el.lastDropElement===o&&(n.$apply(function(){n.onDropLeaveCallback(n,{$data:t.data,$dragElement:t.el,$dropElement:t.el.lastDropElement,$event:a})}),t.el.lastDropElement.removeClass("ad-drop-over"),delete t.el.lastDropElement)}}function d(a,e){f&&m&&(n.$apply(function(){n.onDropCallback(n,{$data:e.data,$dragElement:e.el,$dropElement:m,$event:a})}),m=null)}function u(a,e){var t=o.offset(),n=Math.floor(o.outerHeight()/6);return a+=h.scrollLeft(),e+=h.scrollTop(),e>=t.top+n&&e<=t.top+o.outerHeight()-n&&a>=t.left&&a<=t.left+o.outerWidth()&&a>=t.left&&a<=t.left+o.outerWidth()?o:null}n.droppable=i.adDrop,n.onDropCallback=t(i.adDropEnd)||null,n.onDropOverCallback=t(i.adDropOver)||null,n.onDropLeaveCallback=t(i.adDropLeave)||null;var f=!1,m=null,h=$(a);r()}return{restrict:"A",link:n}}]),angular.module("adaptv.adaptStrap.infinitedropdown",["adaptv.adaptStrap.utils","adaptv.adaptStrap.loadingindicator"]).directive("adInfiniteDropdown",["$parse","$compile","$templateCache","$adConfig","adLoadPage","adDebounce","adStrapUtils","adLoadLocalPage",function(a,e,n,o,i,r,l,g){function c(e,n,o){e.attrs=o,e.adStrapUtils=l,e.items={list:[],paging:{currentPage:1,totalPages:t,pageSize:Number(o.pageSize)||10}},e.localConfig={loadingData:!1,singleSelectionMode:a(o.singleSelectionMode)()?!0:!1,dimensions:{"max-height":o.maxHeight||"200px","max-width":o.maxWidth||"auto"}},e.selectedItems=e.$eval(o.selectedItems)||[],e.ajaxConfig=e.$eval(o.ajaxConfig)||{};var c,s=[];e.addRemoveItem=function(a,t,n){a.stopPropagation(),e.localConfig.singleSelectionMode?e.selectedItems[0]=t:l.addRemoveItemFromList(t,n);var i=e.$eval(o.onItemClick);i&&i(t)},e.loadPage=r(function(a){c=Math.random(),e.localConfig.loadingData=!0;var t=e.$eval(o.pageLoader)||i,n={pageNumber:a,pageSize:e.items.paging.pageSize,sortKey:e.localConfig.predicate,sortDirection:e.localConfig.reverse,ajaxConfig:e.ajaxConfig,token:c},r=function(t){t.token===c&&(e.items.list=1===a?t.items:e.items.list.concat(t.items),e.items.paging.totalPages=t.totalPages,e.items.paging.currentPage=t.currentPage,e.localConfig.loadingData=!1)},l=function(){e.localConfig.loadingData=!1};o.localDataSource?(n.localData=e.$eval(o.localDataSource),r(g(n))):t(n).then(r,l)},10),e.loadNextPage=function(){e.localConfig.loadingData||e.items.paging.currentPage+1<=e.items.paging.totalPages&&e.loadPage(e.items.paging.currentPage+1)},e.loadPage(1),o.ajaxConfig&&e.$watch(o.ajaxConfig,function(a){a&&e.loadPage(1)},!0),o.localDataSource&&(s.push(e.$watch(o.localDataSource,function(a){a&&e.loadPage(1)})),s.push(e.$watch(o.localDataSource+".length",function(a){a&&e.loadPage(1)}))),e.$on("$destroy",function(){s.forEach(function(a){a()})});var p=angular.element(n).find("ul")[0],d=r(function(){p.scrollTop+p.offsetHeight>=p.scrollHeight-300&&e.loadNextPage()},50);angular.element(p).bind("mousewheel",function(a){a.originalEvent&&a.originalEvent.deltaY&&(p.scrollTop+=a.originalEvent.deltaY,a.preventDefault(),a.stopPropagation()),d()})}return{restrict:"E",scope:!0,link:c,templateUrl:"infinitedropdown/infinitedropdown.tpl.html"}}]),angular.module("adaptv.adaptStrap.loadingindicator",[]).directive("adLoadingIcon",["$adConfig","$compile",function(a,e){return{restrict:"E",compile:function(){return{pre:function(t,n,o){var i=o.loadingIconClass||a.iconClasses.loadingSpinner,r=o.loadingIconSize?"ng-style=\"{'font-size': '"+o.loadingIconSize+"'}\"":"",l='<i class="'+i+'" '+r+"></i>";n.empty(),n.append(e(l)(t))}}}}}]).directive("adLoadingOverlay",["$adConfig",function(a){return{restrict:"E",templateUrl:"loadingindicator/loadingindicator.tpl.html",scope:{loading:"=",zIndex:"@",position:"@",containerClasses:"@",loadingIconClass:"@",loadingIconSize:"@"},compile:function(){return{pre:function(e){e.loadingIconClass=e.loadingIconClass||a.iconClasses.loading,e.loadingIconSize=e.loadingIconSize||"3em"}}}}}]),angular.module("adaptv.adaptStrap.tableajax",["adaptv.adaptStrap.utils","adaptv.adaptStrap.loadingindicator"]).directive("adTableAjax",["$parse","$adConfig","adLoadPage","adDebounce","adStrapUtils",function(a,e,n,o,i){function r(r,l){r.attrs=l,r.iconClasses=e.iconClasses,r.adStrapUtils=i,r.items={list:t,paging:{currentPage:1,totalPages:t,pageSize:Number(l.pageSize)||10,pageSizes:a(l.pageSizes)()||[10,25,50]}},r.localConfig={pagingArray:[],loadingData:!1,tableMaxHeight:l.tableMaxHeight},r.ajaxConfig=r.$eval(l.ajaxConfig),r.columnDefinition=r.$eval(l.columnDefinition);var g,c=[];r.items.paging.pageSizes.indexOf(r.items.paging.pageSize)<0&&(r.items.paging.pageSize=r.items.paging.pageSizes[0]),r.loadPage=o(function(a){g=Math.random(),r.localConfig.loadingData=!0;var e=r.$eval(l.pageLoader)||n,t={pageNumber:a,pageSize:r.items.paging.pageSize,sortKey:r.localConfig.predicate,sortDirection:r.localConfig.reverse,ajaxConfig:r.ajaxConfig,token:g},o=function(a){a.token===g&&(r.items.list=a.items,r.items.paging.totalPages=a.totalPages,r.items.paging.currentPage=a.currentPage,r.localConfig.pagingArray=a.pagingArray,r.localConfig.loadingData=!1)},i=function(){r.localConfig.loadingData=!1};e(t).then(o,i)}),r.loadNextPage=function(){r.localConfig.loadingData||r.items.paging.currentPage+1<=r.items.paging.totalPages&&r.loadPage(r.items.paging.currentPage+1)},r.loadPreviousPage=function(){r.localConfig.loadingData||r.items.paging.currentPage-1>0&&r.loadPage(r.items.paging.currentPage-1)},r.loadLastPage=function(){r.localConfig.loadingData||r.items.paging.currentPage!==r.items.paging.totalPages&&r.loadPage(r.items.paging.totalPages)},r.pageSizeChanged=function(a){Number(a)!==r.items.paging.pageSize&&(r.items.paging.pageSize=Number(a),r.loadPage(1))},r.sortByColumn=function(a){a.sortKey&&(a.sortKey!==r.localConfig.predicate?(r.localConfig.predicate=a.sortKey,r.localConfig.reverse=!0):r.localConfig.reverse===!0?r.localConfig.reverse=!1:(r.localConfig.reverse=t,r.localConfig.predicate=t),r.loadPage(r.items.paging.currentPage))},r.loadPage(1),c.push(r.$watch(l.ajaxConfig,function(){r.loadPage(1)},!0)),c.push(r.$watchCollection(l.columnDefinition,function(){r.columnDefinition=r.$eval(l.columnDefinition)})),r.$on("$destroy",function(){c.forEach(function(a){a()})})}return{restrict:"E",scope:!0,templateUrl:"tableajax/tableajax.tpl.html",controller:["$scope","$attrs",r]}}]),angular.module("adaptv.adaptStrap.tablelite",["adaptv.adaptStrap.utils"]).directive("adTableLite",["$parse","$http","$compile","$filter","$templateCache","$adConfig","adStrapUtils","adDebounce","adLoadLocalPage",function(a,e,n,o,i,r,l,g,c){function s(e,n){function o(a,e,t){e.next()[0]===a[0]?e.before(a):e.prev()[0]===a[0]?e.after(a):e.next()[0]===t[0]?e.before(a):e.prev()[0]===t[0]&&e.after(a)}e.attrs=n,e.iconClasses=r.iconClasses,e.adStrapUtils=l,e.columnDefinition=e.$eval(n.columnDefinition),e.items={list:t,allItems:t,paging:{currentPage:1,totalPages:t,pageSize:Number(n.pageSize)||10,pageSizes:a(n.pageSizes)()||[10,25,50]}},e.localConfig={localData:l.parse(e.$eval(n.localDataSource)),pagingArray:[],dragChange:e.$eval(n.onDragChange)},e.selectedItems=e.$eval(n.selectedItems);var i,s=null,p=null,d=!1,u=[];e.items.paging.pageSizes.indexOf(e.items.paging.pageSize)<0&&(e.items.paging.pageSize=e.items.paging.pageSizes[0]),e.loadPage=g(function(a){var t,o=e.localConfig.localData=l.parse(e.$eval(n.localDataSource));t={pageNumber:a,pageSize:n.disablePaging?o.length:e.items.paging.pageSize,sortKey:e.localConfig.predicate,sortDirection:e.localConfig.reverse,localData:o};var i=c(t);e.items.list=i.items,e.items.allItems=i.allItems,e.items.paging.currentPage=i.currentPage,e.items.paging.totalPages=i.totalPages,e.localConfig.pagingArray=i.pagingArray},100),e.loadNextPage=function(){e.items.paging.currentPage+1<=e.items.paging.totalPages&&e.loadPage(e.items.paging.currentPage+1)},e.loadPreviousPage=function(){e.items.paging.currentPage-1>0&&e.loadPage(e.items.paging.currentPage-1)},e.loadLastPage=function(){e.localConfig.disablePaging||e.loadPage(e.items.paging.totalPages)},e.pageSizeChanged=function(a){e.items.paging.pageSize=a,e.loadPage(1)},e.sortByColumn=function(a){a.sortKey&&(a.sortKey!==e.localConfig.predicate?(e.localConfig.predicate=a.sortKey,e.localConfig.reverse=!0):e.localConfig.reverse===!0?e.localConfig.reverse=!1:(e.localConfig.reverse=t,e.localConfig.predicate=t),e.loadPage(e.items.paging.currentPage))},e.unSortTable=function(){e.localConfig.reverse=t,e.localConfig.predicate=t},e.onDragStart=function(a,t){var n=t.parent();s=$("<tr><td colspan="+t.find("td").length+">&nbsp;</td></tr>"),i=t.index()+(e.items.paging.currentPage-1)*e.items.paging.pageSize-1,t[0]!==n.children().last()[0]?t.next().before(s):n.append(s)},e.onDragEnd=function(){s.remove()},e.onDragOver=function(a,e,t){s&&o(s,t,e)},e.onDropEnd=function(a,t){var n;s&&(s.next()[0]?s.next().before(t):s.prev()[0]&&s.prev().after(t),s.remove(),d=!0,n=t.index()+(e.items.paging.currentPage-1)*e.items.paging.pageSize-1,l.moveItemInList(i,n,e.localConfig.localData),e.unSortTable(),e.localConfig.dragChange&&e.localConfig.dragChange(i,n,a)),p&&(p.removeClass("btn-primary"),p=null)},e.onNextPageButtonOver=function(a,e,t){p&&(p.removeClass("btn-primary"),p=null),"disabled"!==t.attr("disabled")&&(p=t,p.addClass("btn-primary"))},e.onNextPageButtonDrop=function(a,t){var n;p&&(d=!0,"btnPrev"===p.attr("id")&&(n=e.items.paging.pageSize*(e.items.paging.currentPage-1)-1),"btnNext"===p.attr("id")&&(n=e.items.paging.pageSize*e.items.paging.currentPage),l.moveItemInList(i,n,e.localConfig.localData),s.remove(),t.remove(),e.localConfig.dragChange&&e.localConfig.dragChange(i,n,a),p.removeClass("btn-primary"),p=null)},e.loadPage(1),u.push(e.$watch(n.localDataSource,function(){e.loadPage(e.items.paging.currentPage)})),u.push(e.$watch(n.localDataSource+".length",function(){e.loadPage(e.items.paging.currentPage)})),u.push(e.$watchCollection(n.columnDefinition,function(){e.columnDefinition=e.$eval(n.columnDefinition)})),e.$on("$destroy",function(){u.forEach(function(a){a()})})}return{restrict:"E",controller:["$scope","$attrs",s],templateUrl:"tablelite/tablelite.tpl.html",scope:!0}}]),angular.module("adaptv.adaptStrap.treebrowser",[]).directive("adTreeBrowser",["$adConfig",function(a){function e(e,t){var n=Math.random();e.attrs=t,e.iconClasses=a.iconClasses,e.treeRoot=e.$eval(t.treeRoot)||{},e.toggle=function(a,n){var o;a.stopPropagation(),o=e.$eval(t.toggleCallback),o?o(n):n._ad_expanded=!n._ad_expanded};var o=e.$eval(t.hasChildren);e.hasChildren=function(a){var e=a[t.childNode]&&a[t.childNode].length>0;return o&&(e=o(a)),e},e.localConfig={rendererTemplateId:"tree-renderer-"+n+".html"}}return{restrict:"E",scope:!0,controller:["$scope","$attrs",e],templateUrl:"treebrowser/treebrowser.tpl.html"}}]),angular.module("adaptv.adaptStrap.utils",[]).factory("adStrapUtils",["$filter",function(a){var e=function(a,e){var t=e.split(".");if(a)for(;t.length;){var n=t.shift();a&&(a=a[n])}return a},t=function(e,t,n){var o,i;return e&&"function"==typeof e?e(n):(t&&(o=t.split(":"),i=o[1],e=i?a(o[0])(e,i):a(o[0])(e)),e)},n=function(a,e){var t=!1;return e.forEach(function(e){angular.equals(a,e)&&(t=!0)}),t},o=function(a,e){var t,o=!0;for(t=0;t<a.length;t++)if(n(a[t],e)===!1){o=!1;break}return o},i=function(a,e){e.push(a)},r=function(a,e){var t;for(t=e.length-1;t>-1;t--)angular.equals(a,e[t])&&e.splice(t,1)},l=function(a,e){var t,n=!1;for(t=e.length-1;t>-1;t--)angular.equals(a,e[t])&&(e.splice(t,1),n=!0);n===!1&&e.push(a)},g=function(a,e){a.forEach(function(a){n(a,e)||l(a,e)})},c=function(a,e){o(a,e)?e.length=0:g(a,e)},s=function(a,e,t){e<t.length&&t.splice(e,0,t.splice(a,1)[0])},p=function(a){var e=[];return angular.isArray(a)?e=a:angular.forEach(a,function(a){e.push(a)}),e},d=function(a,e){if(e&&"function"==typeof e)return e(a);for(var t=e.split(".");t.length;)a=a[t.shift()];return a};return{evalObjectProperty:e,applyFilter:t,itemExistsInList:n,itemsExistInList:o,addItemToList:i,removeItemFromList:r,addRemoveItemFromList:l,addItemsToList:g,addRemoveItemsFromList:c,moveItemInList:s,parse:p,getObjectProperty:d}}]).factory("adDebounce",["$timeout","$q",function(a,e){var t=function(t,n,o,i){var r=null,l=e.defer(),g=n||300;return function(){var n=i||this,c=arguments,s=o&&!r,p=function(){o||(l.resolve(t.apply(n,c)),l=e.defer())};return r&&a.cancel(r),r=a(p,g),s&&(l.resolve(t.apply(n,c)),l=e.defer()),l.promise}};return t}]).directive("adCompileTemplate",["$compile",function(a){return function(e,t,n){e.$watch(function(a){return a.$eval(n.adCompileTemplate)},function(n){t.html(n),a(t.contents())(e)})}}]).factory("adLoadPage",["$adConfig","$http","adStrapUtils",function(a,e,t){return function(n){var o=(n.pageNumber-1)*n.pageSize,i=angular.copy(a.paging),r=angular.copy(n.ajaxConfig);r.paginationConfig&&r.paginationConfig.request&&angular.extend(i.request,r.paginationConfig.request),r.paginationConfig&&r.paginationConfig.response&&angular.extend(i.response,r.paginationConfig.response),r.params=r.params?r.params:{},r.params[i.request.start]=o,r.params[i.request.pageSize]=n.pageSize,r.params[i.request.page]=n.pageNumber,n.sortKey&&(r.params[i.request.sortField]=n.sortKey),n.sortDirection===!1?r.params[i.request.sortDirection]=i.request.sortAscValue:n.sortDirection===!0&&(r.params[i.request.sortDirection]=i.request.sortDescValue);var l;return l="JSONP"===r.method?e.jsonp(r.url+"?callback=JSON_CALLBACK",r):e(r),l.then(function(a){for(var e={items:t.evalObjectProperty(a.data,i.response.itemsLocation),currentPage:n.pageNumber,totalPages:Math.ceil(t.evalObjectProperty(a.data,i.response.totalItems)/n.pageSize),pagingArray:[],token:n.token},o=5,r=n.pageNumber-Math.floor(o/2),l=r;l<=n.pageNumber;l++)l>0&&e.pagingArray.push(l);for(;e.pagingArray.length<o&&!(l>e.totalPages);)e.pagingArray.push(l),l++;return e})}}]).factory("adLoadLocalPage",["$filter",function(a){return function(e){var n,o,i={items:t,currentPage:e.pageNumber,totalPages:t,pagingArray:[],token:e.token},r=(e.pageNumber-1)*e.pageSize,l=r+e.pageSize,g=e.localData;o=a("orderBy")(g,e.sortKey,e.sortDirection),i.items=o.slice(r,l),i.allItems=g,i.currentPage=e.pageNumber,i.totalPages=Math.ceil(g.length/e.pageSize);var c=5,s=e.pageNumber-Math.floor(c/2);for(n=s;n<=e.pageNumber;n++)n>0&&i.pagingArray.push(n);for(;i.pagingArray.length<c&&!(n>i.totalPages);)i.pagingArray.push(n),n++;return i}}])}(window,document);