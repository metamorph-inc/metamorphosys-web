{"version":3,"sources":["client_apps/componentBrowser/services/node_modules/browserify/node_modules/browser-pack/_prelude.js","client_apps/componentBrowser/services/componentLibrary.js"],"names":[],"mappings":"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","file":"componentLibrary.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*globals angular*/\n\n'use strict';\n\nangular.module(\n    'mms.componentBrowser.componentLibrary', [])\n    .provider('componentLibrary', function ComponentLibraryProvider() {\n        var serverUrl;\n\n        this.setServerUrl = function (url) {\n            serverUrl = url;\n        };\n\n        this.$get = [\n\n            '$http',\n            '$q',\n            '$log',\n\n            function ($http, $q, $log) {\n\n                var ComponentLibrary,\n                    encodeCategoryPath,\n                    downloadURL;\n\n                encodeCategoryPath = function(path) {\n                    return path.replace(/\\//g, '!');\n                };\n\n                ComponentLibrary = function () {\n\n                    var classificationTree,\n                        grandTotal;\n\n                    this.getListOfComponents = function(categoryPath, itemCount, cursor ) {\n\n                        var deferred = $q.defer();\n\n                        /*  Approach changed from getting all components in a category to getting all components in\n                            the current category and all categories below.\n                         */\n\n                        //url = serverUrl + '/components/list/' + encodeCategoryPath(categoryPath) +\n                        //    '/' + itemCount + '/' + cursor;\n                        //\n                        //$http.get(url)\n                        //\n                        //    .success(function (data) {\n                        //        deferred.resolve(data.components);\n                        //    })\n                        //    .error(function (e) {    // assume attempt to page past available components\n                        //        deferred.reject('Could not load list of components', e);\n                        //});\n\n                        $http.get(\n                            serverUrl + '/components/search' + '/' + encodeCategoryPath(categoryPath) +\n                            '/' + '_all' + '/' + itemCount + '/' + cursor)\n                            .success(function(data){\n                                deferred.resolve(data);\n                            })\n                            .error(function (e) {\n                                deferred.reject('Could not perform search', e);\n                            });\n\n                        return deferred.promise;\n                    };\n\n\n                    this.getClassificationTree = function (id) {\n\n                        var deferred = $q.defer(),\n                            url;\n\n                        url = serverUrl + '/classification/tree';\n\n                        if (angular.isString(id)) {\n                            url += '/' + encodeCategoryPath(id);\n                        }\n\n                        $http.get(url)\n\n                            .success(function (data) {\n\n                                classificationTree = data.classes;\n                                deferred.resolve(classificationTree);\n                                grandTotal = data.grandTotal;\n\n                            })\n                            .error(function (data, status, headers, config) {\n                                deferred.reject({\n                                    msg: 'Could not load classification tree',\n                                    data: data,\n                                    status: status,\n                                    headers: headers,\n                                    config: config\n                                });\n                            });\n\n                        return deferred.promise;\n                    };\n\n\n                    downloadURL = function (url) {\n                        var hiddenIFrameID = 'hiddenDownloader',\n                            iframe = document.getElementById(hiddenIFrameID);\n                        if (iframe === null) {\n                            iframe = document.createElement('iframe');\n                            iframe.id = hiddenIFrameID;\n                            iframe.style.display = 'none';\n                            document.body.appendChild(iframe);\n                        }\n                        iframe.src = url;\n                    };\n\n\n                    this.downloadComponent = function(id) {\n\n                        $log.debug('Download handler');\n\n                        $http.get(serverUrl + '/getcomponent/f/' + id)\n                            .success(function (filename) {\n\n                                downloadURL(serverUrl + \"/\" + filename);\n\n                            });\n                    };\n\n                    this.getGrandTotal = function() {\n                        return grandTotal;\n                    };\n\n                    this.searchComponents = function(categoryPath, globalSearchText, itemCount, cursor, columnSearchText, sortColumns) {\n\n                        var deferred = $q.defer();\n\n                        globalSearchText = globalSearchText === undefined  ||  globalSearchText === null  ||  globalSearchText === ''  ? '_all' : globalSearchText;\n\n                        sortColumns = sortColumns === undefined  ||  sortColumns === null ? [] : sortColumns;\n\n                        var parameters = {};\n                        parameters.columnSearchText = columnSearchText;\n                        parameters.sortColumns = sortColumns;\n\n                        $http({\n                            url: serverUrl +'/components/search' + '/' + encodeCategoryPath(categoryPath) + '/' + globalSearchText + '/' + itemCount + '/' + cursor,\n                            method: \"GET\",\n                            params: parameters\n                        })\n                            .success(function(data){\n\n                                if (data && angular.isArray(data.component) && data.component.length) {\n                                    deferred.resolve(data);\n                                } else {\n                                    data = {};\n                                    data.component = [];  //  no data\n                                    deferred.resolve(data);\n                                }\n\n                            })\n                            .error(function (e) {\n                                deferred.reject('Could not perform search', e);\n                            });\n\n                        return deferred.promise;\n\n                    };\n\n\n                };\n\n                return new ComponentLibrary();\n\n            }\n        ];\n    });\n"]}