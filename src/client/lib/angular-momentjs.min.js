/*
  angular-momentjs - v0.1.6 
  2014-01-28
*/

! function ( a, b ) {
    "use strict";
    b.module( "angular-moment", [ "gdi2290.moment" ] ), b.module( "angular-momentjs", [ "gdi2290.moment" ] ), b.module(
        "ngMoment", [ "gdi2290.moment" ] ), b.module( "ngMomentjs", [ "gdi2290.moment" ] ), b.module( "ngMomentJS", [
        "gdi2290.moment"
    ] ), b.module( "gdi2290.amTimeAgo", [] ), b.module( "gdi2290.amDateFormat", [] ), b.module(
        "gdi2290.moment-service", [] ), b.module( "gdi2290.moment", [ "gdi2290.moment-service", "gdi2290.amDateFormat",
        "gdi2290.amTimeAgo"
    ] ), b.module( "gdi2290.amDateFormat" )
        .filter( "amDateFormat", function ( a ) {
            return function ( b, c ) {
                return "undefined" == typeof b || null === b ? "" : ( !isNaN( parseFloat( b ) ) && isFinite( b ) &&
                    ( b = new Date( parseInt( b, 10 ) ) ), a.then ? void a()
                    .then( function ( a ) {
                        return a( b )
                            .format( c )
                    } ) : a( b )
                    .format( c ) )
            }
        } ), b.module( "gdi2290.amTimeAgo" )
        .directive( "amTimeAgo", function ( a, c ) {
            function d( a ) {
                return "undefined" == typeof a || null === a || "" === a
            }
            return function ( e, f, g ) {
                function h() {
                    m && ( c.cancel( m ), m = null )
                }

                function i( b ) {
                    f.text( b.fromNow() );
                    var d;
                    a.then ? a()
                        .then( function ( a ) {
                            d = a()
                                .diff( b, "minute" )
                        } ) : d = a()
                        .diff( b, "minute" );
                    var e = 3600;
                    1 > d ? e = 1 : 60 > d ? e = 30 : 180 > d && ( e = 300 ), m = c( function () {
                        i( b )
                    }, 1e3 * e, !1 )
                }

                function j() {
                    h(), a()
                        .then ? a.then( function ( a ) {
                            i( a( k, l ) )
                        } ) : i( a( k, l ) )
                }
                var k, l, m = null;
                e.$watch( g.amTimeAgo, function ( a ) {
                    return d( a ) ? ( h(), void( k && ( f.text( "" ), k = null ) ) ) : ( b.isNumber( a ) && ( a =
                        new Date( a ) ), k = a, void j() )
                } ), g.$observe( "amFormat", function ( a ) {
                    l = a, k && j()
                } ), e.$on( "$destroy", function () {
                    h()
                } )
            }
        } ), b.module( "gdi2290.moment-service" )
        .provider( "$moment", function () {
            function a( a, b ) {
                var d = a.createElement( "script" );
                d.type = "text/javascript", d.async = !0, d.src = c, d.onreadystatechange = function () {
                    "complete" === this.readyState && b()
                }, d.onload = b;
                var e = a.getElementsByTagName( "body" )[ 0 ];
                e.appendChild( d )
            }
            var b = !1,
                c = "//cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.0/moment.min.js";
            this.asyncLoading = function ( a ) {
                return b = a || b, this
            }, this.scriptUrl = function ( a ) {
                return c = a || c, this
            }, this.$get = function ( c, d, e, f ) {
                var g = e.defer(),
                    h = f.moment;
                if ( b ) {
                    var i = function () {
                        c( function () {
                            g.resolve( f.moment )
                        } )
                    };
                    a( d[ 0 ], i )
                }
                return b ? g.promise : h
            }
        } )
}( this, this.angular, void 0 );
//# sourceMappingURL=angular-momentjs.min.map